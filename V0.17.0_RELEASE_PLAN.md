# v0.17.0 Release Plan - REALISTIC Assessment

**Version:** 0.17.0
**Release Name:** Key Authorization & Monetization
**Target Date:** TBD
**Sprint:** KEY_AUTHORIZATION (only active sprint for this release)

---

## âœ… What's Actually Done

### Phase 1: Backend & API (100% Complete)
- âœ… Token system implemented (375 tokens/minute)
- âœ… Database schema with credit tracking
- âœ… API endpoints deployed to production:
  - GET /api/tokens/balance (with warnings)
  - POST /api/desktop/transcribe
  - POST /api/tokens/consume
  - POST /api/stripe/create-checkout
  - POST /api/webhooks/stripe
- âœ… Test license keys working: CD7W-AJDK-RLQT-LUFA

### Phase 2: Desktop App (100% Code Complete)
- âœ… Server API integration
- âœ… Token balance display
- âœ… Pre-flight checks (402 errors)
- âœ… Warnings UI (server-driven)
- âœ… License key activation wizard
- âœ… Compiles successfully (0 errors)

### Phase 3: Extension (100% Code Complete)
- âœ… BYOK code removed
- âœ… OpenAI settings deprecated
- âœ… Compiles successfully (0 errors)

**Code Status:** âœ… **ALL CODE COMPLETE** - Ready to build and ship

---

## ðŸš§ What's Left BEFORE Release

### Critical Items (MUST DO):

#### 1. Fix Pricing Configuration ($29.99 vs $12)
**Current Issue:** Code has $12/month, you want $29.99/month
**Files to Update:**
- `website/lib/stripe/config.ts` line 43: Change `amount: 12.00` â†’ `amount: 29.99`
- Test and verify Stripe pricing updates

**Time:** 30 minutes

---

#### 2. Update CHANGELOG.md
**What to Add:**
```markdown
## [0.17.0] - 2025-11-XX

### Added
- Server-side OpenAI key management (Pattern-MONETIZATION-001)
- Token-based pricing: 375 tokens per minute of transcription
- Free tier: 250,000 tokens (~666 minutes one-time)
- Pro tier: 1,000,000 tokens/month ($29.99/month)
- Token purchase: 1,000,000 tokens ($24.99 one-time, never expires)
- Desktop app token balance UI with real-time updates
- Server-calculated warning system (80%, 90%, 95% thresholds)
- License key activation in installation wizard
- Pre-flight token checks before recording
- Stripe integration for payments

### Changed
- Desktop app now proxies transcription through server API
- Token balance displayed instead of USD credits
- Warnings calculated server-side (no more client-side logic)

### Removed
- BYOK (Bring Your Own Key) OpenAI model
- Extension no longer calls OpenAI API directly
- Settings: openaiApiKey, terminal.voice.autoTranscribe, openai.apiKey deprecated

### Breaking Changes
- Extension v0.17.0 requires desktop app v0.17.0
- Existing users must activate license key in desktop app
- OpenAI API key settings no longer functional

### Migration
- See MIGRATION_GUIDE.md for upgrading from BYOK to server-managed keys
```

**Time:** 1 hour

---

#### 3. Update README.md
**Remove:**
- BYOK setup instructions
- OpenAI API key configuration steps

**Add:**
- New pricing information ($29.99/month Pro, $24.99 token purchase)
- License key activation instructions
- Link to dashboard for sign-up

**Time:** 1 hour

---

#### 4. Create MIGRATION_GUIDE.md
**Purpose:** Help existing users transition from BYOK to server keys

**Content:**
```markdown
# Migration Guide: v0.16.x â†’ v0.17.0

## What's Changing
- BYOK (Bring Your Own Key) model removed
- All transcription now goes through Ã†therLight servers
- No more OpenAI API key needed

## Why the Change
- Simpler setup (no OpenAI account needed)
- Better security (no API keys in config files)
- Usage tracking and limits
- Fair pricing model

## How to Upgrade
1. Update to v0.17.0 (extension + desktop app)
2. Sign up at https://aetherlight.ai/signup
3. Get your license key
4. Enter key in desktop app installation wizard
5. Start recording - it just works!

## Pricing
- Free: 250,000 tokens (~666 minutes one-time)
- Pro: $29.99/month for 1,000,000 tokens/month (~2,666 minutes)
- Token Purchase: $24.99 for 1,000,000 tokens (one-time, never expires)

## FAQ
Q: Can I still use my own OpenAI key?
A: No, v0.17.0 removes BYOK support. All users use server-managed keys.

Q: What happens to my old API key setting?
A: It's ignored. Settings are deprecated but won't cause errors.

Q: I run out of free tokens, now what?
A: Upgrade to Pro ($29.99/month) or buy token packs ($24.99 for 1M tokens).
```

**Time:** 30 minutes

---

#### 5. Version Sync All 4 Packages to 0.17.0
**Files:**
- `vscode-lumina/package.json`
- `packages/aetherlight-sdk/package.json`
- `packages/aetherlight-analyzer/package.json`
- `packages/aetherlight-node/package.json`

**Use:** `node scripts/bump-version.js 0.17.0`

**Time:** 15 minutes

---

#### 6. Build Desktop Binaries
**Platforms:**
- Windows (x64)
- macOS (Intel + Apple Silicon)
- Linux (x64)

**Command:** `npm run tauri build` (or platform-specific commands)

**Time:** 1-2 hours (build + test on each platform)

---

#### 7. Generate Extension VSIX
**Command:** `cd vscode-lumina && vsce package`

**Output:** `lumina-0.17.0.vsix`

**Time:** 15 minutes

---

#### 8. Create GitHub Release
**Steps:**
1. Tag: `git tag v0.17.0`
2. Push: `git push origin v0.17.0`
3. Create release on GitHub
4. Attach: Desktop binaries + VSIX file
5. Release notes: Copy from CHANGELOG.md

**Time:** 30 minutes

---

### Optional (Nice to Have):

#### 9. Monthly Token Refresh Cron
**Clarification:** You said it's based on user sign-up date, not calendar month

**Options:**
- A) Vercel Cron (runs daily, checks each user's sign-up anniversary)
- B) Supabase Edge Function with pg_cron
- C) GitHub Actions cron

**SQL Logic:**
```sql
-- Check if 30 days passed since last refresh for pro users
UPDATE profiles
SET
  tokens_balance = 1000000,
  tokens_used_this_month = 0,
  token_refresh_date = NOW()
WHERE
  subscription_tier = 'pro'
  AND (token_refresh_date IS NULL OR token_refresh_date < NOW() - INTERVAL '30 days');
```

**Time:** 2-3 hours (if you want to implement before release)

**Recommendation:** Ship without this, add in v0.17.1 patch. Users won't hit monthly limit immediately.

---

## âŒ What's NOT Part of v0.17.0

These sprints are **NOT** tagged for v0.17.0 release:

- âŒ SELF_CONFIG sprint (status: pending, target v1.0.0)
- âŒ UNLINK_SPRINT_VIEW (status: pending)
- âŒ WALKTHROUGH (status: pending)
- âŒ Website dashboard UI (WEB-001, WEB-002 tasks)

**These can wait for future releases.**

---

## ðŸ“Š Realistic Time Estimate

### Must-Do Items:
1. Fix pricing ($29.99) - 30min
2. Update CHANGELOG - 1hr
3. Update README - 1hr
4. Create migration guide - 30min
5. Version sync - 15min
6. Build desktop binaries - 2hr
7. Generate VSIX - 15min
8. GitHub release - 30min

**Total: ~6 hours of focused work**

### Optional:
9. Monthly refresh cron - 2-3hr (can defer to v0.17.1)

---

## âœ… Definition of Done (v0.17.0)

Release is ready when:
- [x] All code compiles (desktop + extension)
- [x] APIs deployed to production
- [ ] Pricing updated to $29.99/month
- [ ] CHANGELOG.md updated
- [ ] README.md updated
- [ ] MIGRATION_GUIDE.md created
- [ ] All 4 packages versioned to 0.17.0
- [ ] Desktop binaries built (Win/Mac/Linux)
- [ ] Extension VSIX generated
- [ ] GitHub release created with assets

---

## ðŸŽ¯ Recommended Release Sequence

### Day 1 (Documentation - 3 hours):
1. Update Stripe pricing to $29.99
2. Update CHANGELOG.md
3. Update README.md
4. Create MIGRATION_GUIDE.md

### Day 2 (Build & Ship - 3 hours):
1. Version sync to 0.17.0
2. Build desktop binaries
3. Generate extension VSIX
4. Create GitHub release
5. Publish to VS Code Marketplace

### Day 3 (Post-Release - optional):
1. Implement monthly refresh cron (or defer to v0.17.1)
2. Monitor for issues
3. Update website pricing page

---

## ðŸš¨ Critical Notes

1. **Manual testing:** You can't test everything until you publish, but basic smoke tests should work:
   - Desktop app launches
   - Balance API works with test key
   - Extension activates without errors

2. **Pricing:** Make sure Stripe is configured for $29.99 BEFORE you publish

3. **Migration:** Existing users will need to sign up for accounts. Make this clear in release notes.

4. **Monthly refresh:** Can ship without it. Pro users get 1M tokens on signup, they won't hit the limit for weeks. Add cron in v0.17.1.

---

**Bottom Line:** You're ~6 hours away from shipping v0.17.0. Everything else (Self-Config, etc.) is for future releases.

**Next Action:** Start with updating Stripe pricing to $29.99, then work through documentation items.
